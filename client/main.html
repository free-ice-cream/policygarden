<head>
  <title>Policy Garden</title>
</head>

<body>
  <h1>Policy Garden</h1>
  {{#if simulationRunning}}
    <button class="simulation-toggle">simulation stop</button>
  {{else}}
    <label>speed</label> <input class="simulation-speed" value="{{simulationSpeed}}">
    <button class="simulation-toggle">simulation start</button>
    <button class="simulation-step">simulation step</button>
  {{/if}}
  
  <section class="goals">
    <h2>Goals</h2>
    <div class="nodes">
      {{#each goals}}
        {{> node}}
      {{/each}}
    </div>
    <button class="create-goal">create goal</button>
  </section>

  <section class="policies">
    <h2>Policies</h2>
    <div class="nodes">
      {{#each policies}}
        {{> node}}
      {{/each}}
    </div>
    <button class="create-policy">create policy</button>
  </section>

  <section class="players">
    <h2>Players</h2>
    <div class="nodes">
      {{#each players}}
        {{> node}}
      {{/each}}
    </div>
    <button class="create-player">create player</button>
  </section>

</body>

<template name="node">
  <div class="node">
    <input name="title" value="{{title}}" placeholder="add a title">
    <input name="description" value={{description}} placeholder="add a description">
    <div class="data">
      <label>overflow level</label><input name="overflow" class="number" value="{{overflow}}">
      <label>current level</label><input name="level" class="number" value="{{level}}">
      {{#if policy}}
        <label>minimum level</label><input name="threshold" class="number" value="{{threshold}}">
      {{/if}}
      {{#if player}}
        <label>replenishment</label><input name="replenish" class="number" value="{{replenish}}">
      {{else}}
        <label>leak</label><input name="decay" class="number" value="{{decay}}">
      {{/if}}
    </div>
    <div class="connections data">
      {{#if showConnections}}
        <h4>water flows to</h4>
      {{/if}}
      {{#each connections}}
        {{> connection}}
      {{/each}}
    </div>
    <button class="delete-node">delete</button>
  </div>
</template>

<template name="connection">
  <label>{{targetTitle}}</label><input name="bandwidth" value="{{bandwidth}}">
</template>